(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28552c5d"],{"04ca":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"dashboard-editor-container"},[i("div",{staticClass:"filter-container"},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"220px"},attrs:{placeholder:"租户ID"},on:{change:function(e){return t.tenantSelectList()}},model:{value:t.listQuery.tenantId,callback:function(e){t.$set(t.listQuery,"tenantId",e)},expression:"listQuery.tenantId"}},t._l(t.tenantOptions,(function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"220px"},attrs:{placeholder:"项目ID"},on:{change:function(e){return t.itemSelectList()}},model:{value:t.listQuery.itemId,callback:function(e){t.$set(t.listQuery,"itemId",e)},expression:"listQuery.itemId"}},t._l(t.itemOptions,(function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"220px"},attrs:{placeholder:"线程池ID"},on:{change:function(e){return t.threadPoolSelectList()}},model:{value:t.listQuery.tpId,callback:function(e){t.$set(t.listQuery,"tpId",e)},expression:"listQuery.tpId"}},t._l(t.threadPoolOptions,(function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"220px"},attrs:{placeholder:"IP : Port"},model:{value:t.listQuery.identify,callback:function(e){t.$set(t.listQuery,"identify",e)},expression:"listQuery.identify"}},t._l(t.identifyOptions,(function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("\n      搜索\n    ")])],1),t._v(" "),i("panel-group",{on:{handleSetLineChartData:t.handleSetLineChartData}}),t._v(" "),i("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[i("el-form",{staticStyle:{},attrs:{"label-position":"left"}},[i("el-form-item",{attrs:{label:"核心线程","label-width":"200px"}},[i("span",[t._v(t._s(t.temp.coreSize))])]),t._v(" "),i("el-form-item",{attrs:{label:"最大线程","label-width":"200px"}},[i("span",[t._v(t._s(t.temp.maxSize))])]),t._v(" "),i("el-form-item",{attrs:{label:"队列类型","label-width":"200px"}},[i("span",[t._v(t._s(t._f("queueFilter")(t.temp.queueType)))])]),t._v(" "),i("el-form-item",{attrs:{label:"队列容量","label-width":"200px"}},[i("span",[t._v(t._s(t.temp.capacity))])]),t._v(" "),i("el-form-item",{attrs:{label:"拒绝策略","label-width":"200px"}},[i("span",[t._v(t._s(t._f("rejectedFilter")(t.temp.rejectedType)))])]),t._v(" "),i("el-form-item",{attrs:{label:"KVTime","label-width":"200px"}},[i("span",[t._v(t._s(t.temp.keepAliveTime))])])],1)],1),t._v(" "),i("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[i("line-chart",{attrs:{"chart-data":t.lineChartData}})],1),t._v(" "),i("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[i("line-chart-two",{attrs:{"chart-data":t.lineChartData}})],1)],1):t._e()},a=[],s=(i("ac6a"),i("456d"),i("96cf"),i("3b8d")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:{height:t.height,width:t.width}})},o=[],l=i("ed08"),u={data:function(){return{$_sidebarElm:null}},mounted:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_resizeHandler:function(){var t=this;return Object(l["b"])((function(){t.chart&&t.chart.resize()}),100)()},$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}},c={mixins:[u],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"450px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=i("313e");this.chart=t.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.poolSizeList,i=t.activeSizeList,n=(t.queueSizeList,t.completedTaskCountList,t.rejectCountList),a=t.dayList,s=(t.queueRemainingCapacityList,t.currentLoadList);this.chart.setOption({title:{text:"Stacked Area Chart"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["poolSize","activeSize","rejectCount","currentLoad"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:a}],yAxis:[{type:"value"}],series:[{name:"poolSize",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:e},{name:"activeSize",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:i},{name:"rejectCount",type:"line",stack:"Total",color:"#f47920",areaStyle:{},emphasis:{focus:"series"},data:n},{name:"currentLoad",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:s}]})}}},d=c,h=i("2877"),p=Object(h["a"])(d,r,o,!1,null,null,null),f=p.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:{height:t.height,width:t.width}})},y=[],v={mixins:[u],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"450px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=i("313e");this.chart=t.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.poolSizeList,t.activeSizeList,t.queueSizeList),i=t.completedTaskCountList,n=(t.rejectCountList,t.dayList),a=t.queueRemainingCapacityList;this.chart.setOption({title:{text:"Stacked Area Chart"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["queueSize","queueRemainingCapacity","completedTaskCount"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:n}],yAxis:[{type:"value"}],series:[{name:"queueSize",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:e},{name:"queueRemainingCapacity",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:a},{name:"completedTaskCount",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:i}]})}}},b=v,g=Object(h["a"])(b,m,y,!1,null,null,null),_=g.exports,S=i("c9fe"),L=i("3737"),k=i("dd71"),I=i("4d85"),O=i("397f"),C=i("b775");function z(t){return Object(C["a"])({url:"/v1/cs/monitor/info",method:"post",data:t})}var x={chartInfo:{poolSizeList:[],activeSizeList:[],queueSizeList:[],completedTaskCountList:[],rejectCountList:[],dayList:[],queueRemainingCapacityList:[],currentLoadList:[]}},Q={name:"DashboardAdmin",components:{LineChart:f,LineChartTwo:_},filters:{queueFilter:function(t){return"1"==t?"ArrayBlockingQueue":"2"==t?"LinkedBlockingQueue":"3"==t?"LinkedBlockingDeque":"4"==t?"SynchronousQueue":"5"==t?"LinkedTransferQueue":"6"==t?"PriorityBlockingQueue":"9"==t?"ResizableLinkedBlockingQueue":void 0},rejectedFilter:function(t){return"1"==t?"CallerRunsPolicy":"2"==t?"AbortPolicy":"3"==t?"DiscardPolicy":"4"==t?"DiscardOldestPolicy":void 0}},data:function(){return{lineChartData:x.chartInfo,countSucTotal:0,countRunningTotal:0,countFailTotal:0,show:!1,size:500,tenantOptions:[],threadPoolOptions:[],itemOptions:[],identifyOptions:[],listQuery:{current:1,size:10,itemId:"",tpId:"",tenantId:"",identify:"",instanceId:""},temp:{}}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.chartInfo(),this.initSelect();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{handleSetLineChartData:function(t){this.lineChartData=x[t]},fetchData:function(){var t=this;null!=this.listQuery.tenantId&&0!=Object.keys(this.listQuery.tenantId).length?null!=this.listQuery.itemId&&0!=Object.keys(this.listQuery.itemId).length?null!=this.listQuery.tpId&&0!=Object.keys(this.listQuery.tpId).length?null!=this.listQuery.identify&&0!=Object.keys(this.listQuery.identify).length?(this.listQuery.instanceId=this.listQuery.identify,I["d"](this.listQuery).then((function(e){console.log(e),t.temp=e})),this.initChart()):alert("IP:PORT不允许为空!"):alert("线程池ID不允许为空!"):alert("项目ID不允许为空"):alert("租户ID不允许为空")},refreshData:function(){this.listQuery.tenantId=null,this.listQuery.itemId=null,this.listQuery.tpId=null},chartInfo:function(){var t=this;S["a"]().then((function(e){t.show=!0,t.countSucTotal=e.tenantCount,t.countRunningTotal=e.threadPoolCount,t.countFailTotal=e.itemCount}))},initSelect:function(){var t=this;k["c"]({size:this.size}).then((function(e){for(var i=e.records,n=0;n<i.length;n++)t.tenantOptions.push({key:i[n].tenantId,display_name:i[n].tenantId+" "+i[n].tenantName})}))},tenantSelectList:function(){var t=this;this.listQuery.itemId=null,this.listQuery.tpId=null,this.listQuery.identify=null,this.itemOptions=[],this.threadPoolOptions=[],this.identifyOptions=[];var e={tenantId:this.listQuery.tenantId,size:this.size};L["c"](e).then((function(e){for(var i=e.records,n=0;n<i.length;n++)t.itemOptions.push({key:i[n].itemId,display_name:i[n].itemId+" "+i[n].itemName})}))},itemSelectList:function(){var t=this;this.listQuery.tpId=null,this.listQuery.identify=null,this.threadPoolOptions=[],this.identifyOptions=[];var e={itemId:this.listQuery.itemId,size:this.size};I["e"](e).then((function(e){for(var i=e.records,n=0;n<i.length;n++)t.threadPoolOptions.push({key:i[n].tpId,display_name:i[n].tpId})}))},threadPoolSelectList:function(){var t=this;this.listQuery.identify=null,this.identifyOptions=[];var e=[this.listQuery.itemId,this.listQuery.tpId];O["a"](e).then((function(e){e.records;for(var i=0;i<e.length;i++)t.identifyOptions.push({key:e[i].identify,display_name:e[i].clientAddress})}))},initChart:function(){var t=this;this.listQuery.tenantId,this.listQuery.itemId,this.listQuery.tpId,this.listQuery.identify;z(this.listQuery).then((function(e){t.lineChartData.dayList=e.times,t.lineChartData.poolSizeList=e.poolSizeList,t.lineChartData.activeSizeList=e.activeSizeList,t.lineChartData.queueSizeList=e.queueSizeList,t.lineChartData.completedTaskCountList=e.completedTaskCountList,t.lineChartData.rejectCountList=e.rejectCountList,t.lineChartData.queueRemainingCapacityList=e.queueRemainingCapacityList,t.lineChartData.currentLoadList=e.currentLoadList}))}}},j=Q,w=(i("677c"),Object(h["a"])(j,n,a,!1,null,"dfb997ca",null));e["default"]=w.exports},3737:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));var n=i("b775");function a(t){return Object(n["a"])({url:"/v1/cs/item/query/page",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/v1/cs/item/update",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/v1/cs/item/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/v1/cs/item/delete/"+t[0]+"/"+t[1],method:"delete"})}},"397f":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"/v1/cs/thread/pool/list/instance/"+t[0]+"/"+t[1],method:"get"})}function s(t){return Object(n["a"])({url:"/v1/cs/configs?identify="+t.identify,method:"post",data:t})}},"4d85":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"f",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return u}));var n=i("b775");function a(t){return Object(n["a"])({url:"/v1/cs/thread/pool/query/page",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/v1/cs/configs?tpId="+t.tpId+"&itemId="+t.itemId+"&namespace="+t.tenantId+"&instanceId="+t.identify,method:"get"})}function r(t){return Object(n["a"])({url:"/v1/cs/thread/pool/save_or_update",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/v1/cs/thread/pool/save_or_update",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/v1/cs/thread/pool/delete",method:"delete",data:t})}function u(t){return Object(n["a"])({url:"/v1/cs/thread/pool/alarm/enable/"+t.id+"/"+t.isAlarm,method:"post"})}},"677c":function(t,e,i){"use strict";i("6caa")},"6caa":function(t,e,i){},c9fe:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"e",(function(){return o})),i.d(e,"d",(function(){return l}));var n=i("b775");function a(){return Object(n["a"])({url:"/v1/cs/dashboard",method:"get"})}function s(){return Object(n["a"])({url:"/v1/cs/dashboard/line/chart",method:"get"})}function r(){return Object(n["a"])({url:"/v1/cs/dashboard/pie/chart",method:"get"})}function o(){return Object(n["a"])({url:"/v1/cs/dashboard/tenant/chart",method:"get"})}function l(){return Object(n["a"])({url:"/v1/cs/dashboard/ranking",method:"get"})}},dd71:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));var n=i("b775");function a(t){return Object(n["a"])({url:"/v1/cs/tenant/query/page",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/v1/cs/tenant/update",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/v1/cs/tenant/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/v1/cs/tenant/delete/"+t,method:"delete"})}}}]);